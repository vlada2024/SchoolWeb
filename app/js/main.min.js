window.addEventListener("load",onWindowLoad);const USER_THEME="user-theme2",LIGHT="light",DARK="dark",AUTO="auto",DEFAULT_THEME=LIGHT,BUTTON_ACTIVE="active",DARK_THEME_BUTTON=".indicator-image-dark",LIGHT_THEME_BUTTON=".indicator-image-light",AUTO_THEME_BUTTON=".indicator-image-auto",EMPTY_THEME_BUTTON=".indicator-image-empty";function onWindowLoad(){let e=i();const t=[LIGHT,DARK,AUTO],a=document.documentElement,T=document.querySelector(DARK_THEME_BUTTON),o=document.querySelector(LIGHT_THEME_BUTTON),s=document.querySelector(AUTO_THEME_BUTTON),n=document.querySelector(EMPTY_THEME_BUTTON),c=[o,T,s];function i(){return dataStorage.loadValue(USER_THEME)}function r(e){e?(s.classList.contains(BUTTON_ACTIVE)||s.classList.add(BUTTON_ACTIVE),n.classList.contains(BUTTON_ACTIVE)||n.classList.add(BUTTON_ACTIVE)):(s.classList.contains(BUTTON_ACTIVE)&&s.classList.remove(BUTTON_ACTIVE),n.classList.contains(BUTTON_ACTIVE)&&n.classList.remove(BUTTON_ACTIVE))}function d(){return window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?DARK:LIGHT:DEFAULT_THEME}function E(T,o,s=!1){!function(e,T){if(e==T)return;a.classList.contains(e)&&a.classList.remove(e);let o="";T==AUTO&&(o=d(),a.classList.remove(e),a.classList.add(o),r(!1));for(let s=0;s<c.length;s++)T==AUTO?t[s]!=o?c[s].classList.remove(BUTTON_ACTIVE):c[s].classList.add(BUTTON_ACTIVE):(t[s]==T&&(c[s].classList.add(BUTTON_ACTIVE),a.classList.add(T)),t[s]==e&&c[s].classList.remove(BUTTON_ACTIVE))}(T,o),s&&(dataStorage.saveValue(USER_THEME,o),e=o),r(e)}!function(){s?s.addEventListener("click",(t=>{dataStorage.saveValue(USER_THEME,"");const a=e;e=void 0,E(a,AUTO,!1)})):console.error("autoThemeButton not found!"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{if(!dataStorage.loadValue(USER_THEME)){let e=d();E(e==DARK?LIGHT:DARK,e,!1)}}));for(let e=0;e<c.length;e++)if(t[e]!=AUTO)if(button=c[e],button){let a=t[e];button.addEventListener("click",(e=>{r(!0);const t=i();console.warn("theme!!!  ---\x3e>> ",t,a),E(t||d(),a,!0)}))}else console.error("button, "+t[e]+" not found!");e?E("",e,!1):E(AUTO,d(),!1)}()}var dataStorage={saveValue:(e,t)=>{localStorage.setItem(e,t)},loadValue:(e,t)=>{const a=localStorage.getItem(e);return a||t}};